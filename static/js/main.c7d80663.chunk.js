(this["webpackJsonpfood-order-app"]=this["webpackJsonpfood-order-app"]||[]).push([[0],{17:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n.n(c),a=n(6),s=n.n(a),o=(n(17),n(3)),i=n(5),l=n.n(i),d=n(9),m=n(1),b=function(e){return Object(m.jsx)("div",{className:"fixed top-0 left-0 w-full h-screen z-20 bg-gray-950",onClick:e.onClose})},u=function(e){return Object(m.jsx)("div",{className:"fixed top-[15vh] left-[5%] w-[90%] bg-white p-4 rounded-2xl shadow-md z-30 md:w-[40rem] md:left-[calc(50%-20rem)] animate-slide-down",children:Object(m.jsx)("div",{children:e.children})})},j=document.getElementById("overlays"),x=function(e){return Object(m.jsxs)(m.Fragment,{children:[s.a.createPortal(Object(m.jsx)(b,{onClose:e.onClose}),j),s.a.createPortal(Object(m.jsx)(u,{children:e.children}),j)]})},h=function(e){var t="$".concat(e.price.toFixed(2));return Object(m.jsxs)("li",{className:"flex justify-between items-center cart-item-border py-4 px-0 my-4 mx-0",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{className:"mt-0 mr-0 mb-2 ml-0 text-gray-750",children:e.name}),Object(m.jsxs)("div",{className:"w-[10rem] flex justify-between items-center",children:[Object(m.jsx)("span",{className:"font-bold text-yellow-750",children:t}),Object(m.jsx)("span",{className:"font-bold custom-border py-1 px-3 rounded-md text-gray-750",children:"x".concat(e.amount)})]})]}),Object(m.jsxs)("div",{className:"flex flex-col md:flex-row",children:[Object(m.jsx)("button",{className:"cart-item-btn",onClick:e.onRemove,children:"-"}),Object(m.jsx)("button",{className:"cart-item-btn",onClick:e.onAdd,children:"+"})]})]})},f=r.a.createContext({items:[],totalAmount:0,addItem:function(e){},removeItem:function(e){},clearCart:function(){}}),O=function(e){return""===e.trim()},p=function(e){var t=Object(c.useState)({name:!0,street:!0,postalCode:!0,city:!0}),n=Object(o.a)(t,2),r=n[0],a=n[1],s=Object(c.useRef)(),i=Object(c.useRef)(),l=Object(c.useRef)(),d=Object(c.useRef)();return Object(m.jsxs)("form",{className:"my-4 mx-0 h-[19rem] overflow-auto",onSubmit:function(t){t.preventDefault();var n=s.current.value,c=i.current.value,r=l.current.value,o=d.current.value,m=!O(n),b=!O(c),u=5===r.length,j=!O(o);a({name:m,Street:b,postalCode:u,city:j}),m&&b&&j&&u&&e.onSubmit({name:n,street:c,postalCode:r,city:o})},children:[Object(m.jsxs)("div",{className:"mb-2",children:[Object(m.jsx)("label",{className:"font-bold mb-1 block ".concat(r.name?"":"text-red-450"),htmlFor:"name",children:"Your Name"}),Object(m.jsx)("input",{className:"font-inherit custom-border rounded w-80 max-w-full ".concat(r.name?"":"border-red-550 bg-red-75"),type:"text",id:"name",ref:s}),!r.name&&Object(m.jsx)("p",{children:"Please enter a valid name!"})]}),Object(m.jsxs)("div",{className:"mb-2",children:[Object(m.jsx)("label",{className:"font-bold mb-1 block ".concat(r.street?"":"text-red-450"),htmlFor:"street",children:"Street"}),Object(m.jsx)("input",{className:"font-inherit custom-border rounded w-80 max-w-full ".concat(r.street?"":"border-red-550 bg-red-75"),type:"text",id:"street",ref:i}),!r.street&&Object(m.jsx)("p",{children:"Please enter a valid street!"})]}),Object(m.jsxs)("div",{className:"mb-2",children:[Object(m.jsx)("label",{className:"font-bold mb-1 block ".concat(r.postalCode?"":"text-red-450"),htmlFor:"postal",children:"Postal"}),Object(m.jsx)("input",{className:"font-inherit custom-border rounded w-80 max-w-full ".concat(r.postalCode?"":"border-red-550 bg-red-75"),type:"text",id:"postal",ref:l}),!r.postalCode&&Object(m.jsx)("p",{children:"Please enter a valid postal code (5 characters long)!"})]}),Object(m.jsxs)("div",{className:"mb-2",children:[Object(m.jsx)("label",{className:"font-bold mb-1 block ".concat(r.city?"":"text-red-450"),htmlFor:"city",children:"City"}),Object(m.jsx)("input",{className:"font-inherit custom-border rounded w-80 max-w-full ".concat(r.city?"":"border-red-550 bg-red-75"),type:"text",id:"city",ref:d}),!r.city&&Object(m.jsx)("p",{children:"Please enter a valid city!"})]}),Object(m.jsxs)("div",{className:"flex justify-end gap-4",children:[Object(m.jsx)("button",{className:"checkout-btn",type:"button",onClick:e.onCancel,children:"Cancel"}),Object(m.jsx)("button",{className:"checkout-btn bg-yellow-980 text-white border border-solid border-yellow-980 hover:bg-yellow-880 active:bg-yellow-880",children:"Confirm"})]})]})},w=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),r=n[0],a=n[1],s=Object(c.useState)(!1),i=Object(o.a)(s,2),b=i[0],u=i[1],j=Object(c.useState)(!1),O=Object(o.a)(j,2),w=O[0],v=O[1],y=Object(c.useContext)(f),N="$".concat(y.totalAmount.toFixed(2)),g=y.items.length>0,C=function(e){y.addItem(e)},k=function(e){y.removeItem(e)},A=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,fetch("https://food-order-d7315-default-rtdb.asia-southeast1.firebasedatabase.app/orders.json",{method:"POST",body:JSON.stringify({user:t,orderedItems:y.items}),headers:{"Content-Type":"application/json"}});case 3:u(!1),v(!0),y.clearCart();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=y.items.map((function(e){return Object(m.jsx)("ul",{className:"list-none m-0 p-0 max-h-80 overflow-auto",children:Object(m.jsx)(h,{id:e.id,name:e.name,amount:e.amount,price:e.price,onAdd:C.bind(null,e),onRemove:k.bind(null,e.id)},e.id)})})),F=Object(m.jsxs)("div",{className:"text-right",children:[Object(m.jsx)("button",{className:"cart-btn text-yellow-750 border-yellow-750",onClick:e.onHideCart,children:"Close"}),g&&Object(m.jsx)("button",{className:"cart-btn bg-yellow-750 text-white",onClick:function(){a(!0)},children:"Order"})]}),R=Object(m.jsxs)(m.Fragment,{children:[S,Object(m.jsxs)("div",{className:"flex items-center justify-between font-bold text-2xl my-4 mx-0",children:[Object(m.jsx)("span",{children:"Total Amount"}),Object(m.jsx)("span",{children:N})]}),r&&Object(m.jsx)(p,{onCancel:e.onHideCart,onSubmit:A}),!r&&F]}),I=Object(m.jsx)("p",{className:"text-2xl",children:"Sending order data..."}),P=Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("p",{className:"text-2xl",children:"Successfully sent order!"}),Object(m.jsx)("div",{className:"text-right",children:Object(m.jsx)("button",{className:"cart-btn text-yellow-750 border-yellow-750",onClick:e.onHideCart,children:"Close"})})]});return Object(m.jsxs)(x,{onClose:e.onHideCart,children:[!b&&!w&&R,b&&I,w&&P]})},v=n.p+"static/media/meals.2971f633.jpg",y=function(){return Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Object(m.jsx)("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})})},N=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),r=n[0],a=n[1],s=Object(c.useContext)(f),i=s.items,l=s.items.reduce((function(e,t){return e+t.amount}),0),d="cursor-pointer font-inherit font-bold border-none bg-red-850 text-white py-2.5 md:py-3 px-6 md:px-12 flex justify-around items-center rounded-2xl md:rounded-3xl hover:bg-red-950 active:bg-red-950 group ".concat(r?"animate-bump":"");return Object(c.useEffect)((function(){if(0!==s.items.length){a(!0);var e=setTimeout((function(){a(!1)}),300);return function(){clearTimeout(e)}}}),[s.items.length,i]),Object(m.jsxs)("button",{className:d,onClick:e.onClick,children:[Object(m.jsx)("span",{className:"w-5 h-5 md:w-[1.35rem] md:h-[1.35rem] mr-2",children:Object(m.jsx)(y,{})}),Object(m.jsx)("span",{className:"text-sm md:text-base",children:"Your Cart"}),Object(m.jsx)("span",{className:"text-sm md:text-base bg-yellow-650 py-0.5 md:py-1 px-2 md:px-4 rounded-3xl ml-4 font-bold group-hover:bg-yellow-850 group-focus:bg-yellow-850",children:l})]})},g=function(e){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("header",{className:"fixed top-0 left-0 w-full h-16 md:h-20 leading-1 bg-yellow-750 text-white flex justify-between items-center px-8 md:px-10% shadow-md z-10",children:[Object(m.jsx)("h1",{className:"text-2xl md:text-[2rem]",children:"ReactMeals"}),Object(m.jsx)(N,{onClick:e.onShowCart})]}),Object(m.jsx)("div",{className:"w-full h-25 z-0 overflow-hidden",children:Object(m.jsx)("img",{className:"w-8/7 h-full object-cover transform-img",src:v,alt:"A table full of delicious food"})})]})},C=n(12),k=n(0),A=function(e){return Object(m.jsx)("div",{className:"p-4 bg-white shadow-md rounded-2xl",children:e.children})},S=n(4),F=r.a.forwardRef((function(e,t){return Object(m.jsxs)("div",{className:"flex items-center mb-2",children:[Object(m.jsx)("label",{htmlFor:e.input.id,className:"font-bold mr-4",children:e.label}),Object(m.jsx)("input",Object(S.a)({ref:t},e.input))]})})),R=function(e){var t=Object(c.useState)(!0),n=Object(o.a)(t,2),r=n[0],a=n[1],s=Object(c.useRef)();return Object(m.jsxs)("form",{className:"text-right",onSubmit:function(t){t.preventDefault();var n=s.current.value,c=+n;0===n.trim().length||c<1||c>5?a(!1):e.onAddToCart(c)},children:[Object(m.jsx)(F,{ref:s,label:"Amount",input:{id:"amount_"+e.id,type:"number",min:"1",max:"5",step:"1",defaultValue:"1",className:"w-12 font-inherit pl-2 rounded-md custom-border"}}),Object(m.jsx)("button",{className:"font-inherit cursor-pointer bg-yellow-750 custom-border border-yellow-750 text-white py-1 px-8 rounded-3xl font-bold hover:bg-yellow-950 transition-colors",children:"Add"}),!r&&Object(m.jsx)("p",{children:"Please enter a valid amount (1-5)."})]})},I=function(e){var t=Object(c.useContext)(f),n="$".concat(e.price.toFixed(2));return Object(m.jsxs)("li",{className:"flex justify-between m-4 pb-4 border-bottom",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{className:"mt-0 mx-0 mb-1",children:e.name}),Object(m.jsx)("div",{className:"italic",children:e.description}),Object(m.jsx)("div",{className:"mt-1 font-bold text-xl text-yellow-550",children:n})]}),Object(m.jsx)("div",{children:Object(m.jsx)(R,{id:e.id,onAddToCart:function(n){t.addItem({id:e.id,name:e.name,amount:n,price:e.price})}})})]})},P=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(!0),s=Object(o.a)(a,2),i=s[0],b=s[1],u=Object(c.useState)(),j=Object(o.a)(u,2),x=j[0],h=j[1];Object(c.useEffect)((function(){(function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://food-order-d7315-default-rtdb.asia-southeast1.firebasedatabase.app/meals.json");case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Something went wrong!");case 5:return e.next=7,t.json();case 7:for(a in n=e.sent,c=[],n)c.push({id:a,name:n[a].name,description:n[a].description,price:n[a].price});r(c),b(!1);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().catch((function(e){b(!1),h(e.message)}))}),[]);var f=n.map((function(e){return Object(m.jsx)(I,{id:e.id,name:e.name,description:e.description,price:e.price},e.id)}));return i?Object(m.jsx)("section",{className:"text-center p-4 bg-white shadow-md rounded-2xl max-w-[60rem] w-[90%] my-8 mx-auto",children:Object(m.jsx)(k.b.Provider,{value:{className:"spinner"},children:Object(m.jsx)(C.a,{})})}):x?Object(m.jsx)("section",{className:"p-4 bg-white shadow-md rounded-2xl max-w-[60rem] w-[90%] my-8 mx-auto text-center",children:Object(m.jsx)("p",{className:"text-2xl text-red-600",children:x})}):Object(m.jsx)("section",{className:"max-w-[60rem] w-[90%] my-8 mx-auto animate-meals-appear",children:Object(m.jsx)(A,{children:Object(m.jsx)("ul",{className:"list-none m-0 p-0",children:f})})})},E=function(){return Object(m.jsxs)("section",{className:"text-center max-w-[45rem] w-[90%] m-auto mt-[-10rem] relative bg-gray-650 text-white rounded-2xl p-4 shadow-0.5xl",children:[Object(m.jsx)("h2",{className:"mt-0 font-bold text-3xl md:text-[2rem]",children:"Delicious Food, Delivered To You"}),Object(m.jsx)("p",{children:"Choose your favorite meal from our broad selection of available meals and enjoy a delicious lunch or dinner at home."}),Object(m.jsx)("p",{children:"All our meals are cooked with high-quality ingredients, just-in-time and of course by experienced chefs!"})]})},H=function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(E,{}),Object(m.jsx)(P,{})]})},D=n(11),T={items:[],totalAmount:0},z=function(e,t){if("ADD"===t.type){var n,c=e.totalAmount+t.item.price*t.item.amount,r=e.items.findIndex((function(e){return e.id===t.item.id})),a=e.items[r];if(a){var s=Object(S.a)(Object(S.a)({},a),{},{amount:a.amount+t.item.amount});(n=Object(D.a)(e.items))[r]=s}else n=e.items.concat(t.item);return{items:n,totalAmount:c}}if("REMOVE"===t.type){var o,i=e.items.findIndex((function(e){return e.id===t.id})),l=e.items[i],d=e.totalAmount-l.price;if(1===l.amount)o=e.items.filter((function(e){return e.id!==t.id}));else{var m=Object(S.a)(Object(S.a)({},l),{},{amount:l.amount-1});(o=Object(D.a)(e.items))[i]=m}return{items:o,totalAmount:d}}return t.type,T},M=function(e){var t=Object(c.useReducer)(z,T),n=Object(o.a)(t,2),r=n[0],a=n[1],s={items:r.items,totalAmount:r.totalAmount,addItem:function(e){a({type:"ADD",item:e})},removeItem:function(e){a({type:"REMOVE",id:e})},clearCart:function(){a({type:"CLEAR"})}};return Object(m.jsx)(f.Provider,{value:s,children:e.children})};var B=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(m.jsxs)(M,{children:[n&&Object(m.jsx)(w,{onHideCart:function(){r(!1)}}),Object(m.jsx)(g,{onShowCart:function(){r(!0)}}),Object(m.jsx)("main",{children:Object(m.jsx)(H,{})})]})};s.a.render(Object(m.jsx)(B,{}),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.c7d80663.chunk.js.map